// Screen Space Reflections Configuration
// Execute with: /exec enable_ssr

echo "^3========================================"
echo "^3Enabling Screen Space Reflections"
echo "^3========================================"

// Required: Enable framebuffer objects
seta r_fbo "1"
seta r_hdr "1"  // HDR for better quality reflections

// Enable SSR
seta r_ssr "1"

// SSR Quality Settings
seta r_ssrQuality "2"  // 0=low, 1=medium, 2=high, 3=ultra

// Ray marching parameters
seta r_ssrMaxSteps "64"  // Number of ray marching steps (8-128)
seta r_ssrStepSize "1.0"  // Step size multiplier
seta r_ssrMaxDistance "100.0"  // Maximum reflection distance

// Hit detection
seta r_ssrThickness "0.5"  // Depth buffer thickness
seta r_ssrFadeStart "0.8"  // Start fading at screen edges
seta r_ssrFadeEnd "1.0"  // Complete fade at screen edges

// Visual quality
seta r_ssrStrength "1.0"  // Reflection strength (0-2)
seta r_ssrBlur "1"  // Apply roughness-based blur

// Debug (0=off, 1=show rays, 2=show hits)
seta r_ssrDebug "0"

// Ensure PBR materials are enabled for proper reflections
seta r_materialOverride "1"
seta r_materialAutoGen "1"
seta r_materialExport "1"

// Bloom for enhanced reflections
seta r_bloom "1"
seta r_bloom_intensity "0.3"

echo "^2Screen Space Reflections Enabled!"
echo ""
echo "^3Quality Presets:"
echo "^7/r_ssrQuality 0  ^3- Low (fast, 16 steps)"
echo "^7/r_ssrQuality 1  ^3- Medium (balanced, 32 steps)"
echo "^7/r_ssrQuality 2  ^3- High (quality, 64 steps)"
echo "^7/r_ssrQuality 3  ^3- Ultra (best, 128 steps + HiZ)"
echo ""
echo "^3Fine-tuning:"
echo "^7/r_ssrStrength   ^3- Adjust reflection intensity"
echo "^7/r_ssrMaxSteps   ^3- More steps = better quality"
echo "^7/r_ssrThickness  ^3- Adjust hit detection sensitivity"
echo "^3========================================"

// Restart to apply changes
vid_restart