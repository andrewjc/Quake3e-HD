// Enable PBR Material System Configuration
// Execute with: /exec enable_pbr_materials

echo "^3========================================"
echo "^3Enabling PBR Material System"
echo "^3========================================"

// Enable material override system
seta r_materialOverride "1"
seta r_materialAutoGen "1"
seta r_materialExport "1"  // This was the missing setting!

// Material generation quality
seta r_materialGenQuality "3"  // 0=low, 1=medium, 2=high, 3=ultra
seta r_materialGenResolution "1024"  // Texture resolution
seta r_materialGenAsync "1"  // Async generation
seta r_materialCacheSize "64"  // 64MB cache
seta r_materialDebug "1"  // Debug output

// PBR generation parameters (fine-tuning)
seta r_matgen_sobelStrength "1.5"  // Normal map strength
seta r_matgen_sobelThreshold "0.05"  // Edge detection threshold
seta r_matgen_luminanceWeight "0.8"  // Luminance importance
seta r_matgen_frequencyScale "1.2"  // Frequency analysis scale
seta r_matgen_chromaticThreshold "0.25"  // Color variation threshold
seta r_matgen_contrastRadius "7.0"  // Local contrast radius

// Fusion weights for map generation
seta r_matgen_fusionNormal "0.7:0.3"  // Sobel:Frequency blend
seta r_matgen_fusionRoughness "0.6:0.4"  // Frequency:Chromatic blend
seta r_matgen_fusionMetallic "0.8:0.2"  // Chromatic:Contrast blend

// Ensure bloom and HDR are enabled for PBR
seta r_fbo "1"
seta r_hdr "1"
seta r_bloom "1"
seta r_bloom_intensity "0.3"

// Dynamic lighting for PBR
seta r_dlightMode "2"
seta r_dlightIntensity "1.5"
seta r_dlightScale "1.0"
seta r_dynamiclight "1"

echo "^2PBR Material System Enabled!"
echo ""
echo "^3Materials will be auto-generated for textures"
echo "^3Check console for material generation messages"
echo "^3Use /r_materialDebug 1 for detailed output"
echo "^3========================================"

// Restart to apply changes
vid_restart