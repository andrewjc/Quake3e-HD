// Test Shadow and Lighting Features Configuration
// Execute with: /exec test_shadows

echo "^3========================================"
echo "^3Testing Shadow and Lighting Systems"  
echo "^3========================================"

// Disable RTX/RT for now (not working)
seta rtx_enable "0"
seta rt_enable "0"

// Test stencil shadows (mode 2)
echo "^2Enabling Stencil Volume Shadows..."
seta cg_shadows "2"
seta r_stencilbits "8"
seta r_dlightMode "2"
seta r_dynamiclight "1"
seta r_dlightIntensity "2.0"
seta r_dlightScale "1.5"

// Shadow maps for modern shadows
seta r_shadowMapSize "4096"
seta r_shadowMapLod "4"

// Ensure lighting works
seta r_vertexLight "0"
seta r_ambientScale "0.8"
seta r_directedScale "1.2"
seta r_lightmap "0"

// Material system for better surfaces
seta r_materialOverride "1"
seta r_materialAutoGen "1"
seta r_materialGenQuality "3"

// Enable all visual features
seta r_flares "1"
seta r_drawSun "1"
seta r_fastsky "0"

// Bloom for glow effects
seta r_bloom "1"
seta r_bloom_intensity "2.0"
seta r_bloom_threshold "0.8"

// Performance settings
seta r_smp "1"
seta com_maxfps "250"

echo "^2Shadow test configuration loaded!"
echo "^3========================================"
echo "^3Commands to test:"
echo "^7/cg_shadows 0  ^3- No shadows"
echo "^7/cg_shadows 1  ^3- Blob shadows"
echo "^7/cg_shadows 2  ^3- Stencil shadows (current)"
echo "^7/cg_shadows 3  ^3- Projection shadows"
echo "^7/cg_shadows 4  ^3- Advanced shadows (broken)"
echo ""
echo "^7/r_dlightMode 0  ^3- Basic dynamic lights"
echo "^7/r_dlightMode 1  ^3- Standard dynamic lights"  
echo "^7/r_dlightMode 2  ^3- Advanced with shadows"
echo ""
echo "^3After changing stencil settings:"
echo "^7/vid_restart"
echo "^3========================================"

// Restart video to apply stencil buffer
vid_restart